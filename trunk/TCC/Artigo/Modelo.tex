\section{Modelo Proposto}
\label{cap:modelo proposto}


O protótipo AppMan é uma implementação simplificada do GRAND. Ele usa a ferramenta JavaCC para implementar o {\it parsing} e interpretação da GRID-ADL. A figura 2 representa um possível cenário do AppMan sendo executado sobre um ambiente de grade.

O passo 1 da figura representa o usuário submetendo um arquivo de descrição na linguagem GRID-ADL. Esse arquivo é analisado e o grafo de aplicação é feito na memória. Um algoritmo é executado e os sub-DAGs do grafo de aplicação é obtido. O {\it Application Manager} (AM) é inicializado. Então o AM instancia {\it Submission Managers} (SM) no passo 2 e distribui alguns subgrafos para os SMs. Os arquivos de entrada e os executávies são obtidos através de um {\it web server} (passo 3). Na sua atual implementação, AppMan necessita que o usuário indique as máquinas onde os SMs irão ser executados. Com essa simplificação um novo SM é instanciado para cada aplicação em cada máquina especificada. Após a criação dos SMs, o AM determina subgrafos para cada SM. Os SMs informam para o AM o progresso das tarefas. Cada SM, independentemente, verifica a lista das máquinas disponíveis e escolhe aleatoriamente um nó para executar a tarefa. Antes de iniciar a execução de uma tarefa, AppMan transfere todos arquivos de entradas especificados na descrição GRID-ADL para um diretório temporário no nodo remoto onde a tarefa será executada. O arquivo de transferência é executado automaticamento. Então, cada SM recupera a informação atualizada através do serviço de informação do EXEHDA sobre os nodos avaliados. Cada SM escolhe onde irá executar estas tarefas aleatoriamente. Imediatamento um TM é instanciado criando a tarefa remota e monitorando até que a execução da tarefa termine (passo 4).

\begin{figure}[h]
\center
\includegraphics[scale=.2]{img/AppMan.eps}
\label{AppMan}
\caption{AppMan executando principais passos}
\end{figure}

Como sugere o modelo GRAND, o AppMan não possibilita o escalonamento através de outros RMS. É necessário que o EXEHDA e o AppMan estejam presentes em todos nós da grade. Integrar o AppMan com outros RMS possibilitará uma maior escalabilidade da grade e também possibilitará uma aproximação do AppMan ao que sugere o modelo GRAND. Os nodo principais de cada {\it cluster} que compõem a base possuem nodos abaixo delas. É nessário um serviço de compartilhamento de arquivo entre os nodos e base.

Uma especificação {\it Distributed Resource Management Application} \cite{Rajic2002} desenvolvida pelo OGF, tem por objetivo abstrair as diferenças dos RMS e fornecer uma API visando facilitar a integração de aplicações. O escopo da DRMAA é limitada a submissão, monitoramento e controle das tarefas além de retornar status de conclusão de uma tarefa. Inicialmente implementada na linguagem C, atualmente possui uma implementação na linguagem Java, apesar de oferecer suporte apenas para o {\it Sun Grid Engine} \cite{Templeton}.
Inúmeros relatórios N1™ Grid Engine \cite{Templeton2006}, GridWay \cite{Herrera2007}, Condor \cite{Troeger2007} e PBS \cite{Ciesnik2007} de implementações com a DRMAA concluem possitivamente para as implementações. Não havendo a necessidade de grande inteferência no código dos RMSs citados.

O modelo proposto para o TCC consiste em avaliar se a especificação DRMAA atende as necessidades do AppMan bem como realizar a integração do AppMan ao menos com um RMS.



\begin{figure}[h]
\center
\includegraphics[scale=.2]{img/AppManRMS.eps}
\label{AppManRMS}
\caption{AppMan executando em um cenário com TMs comunicando com RMS}
\end{figure}

\begin{figure}[h]
\center
\includegraphics[scale=.5]{img/SubmissionManager.eps}
\label{AppManRMS}
\caption{AppMan executando em um cenário com TMs comunicando com RMS}
\end{figure}
